{"version":3,"names":["_preact","require","_hooks","_deepsignal","_utils","_hooks2","_kebabToCamelcase","isObject","item","Array","isArray","mergeDeepSignals","target","source","overwrite","k","peek","newRule","ruleClean","ruleNewline","empty","cssStringToObject","val","tree","block","left","exec","replace","shift","trim","unshift","getGlobalEventDirective","type","directives","evaluate","filter","suffix","forEach","entry","useInit","cb","event","globalVar","window","document","addEventListener","removeEventListener","_default","directive","context","props","children","inheritedContext","Provider","inheritedValue","useContext","currentValue","useRef","deepSignal","defaultEntry","find","current","useMemo","namespace","value","newValue","h","priority","watch","useWatch","init","on","element","class","classNames","className","result","currentClass","classFinder","RegExp","test","ref","classList","remove","add","style","styleProp","removeProperty","bind","attribute","el","cssText","undefined","err","setAttribute","removeAttribute","Type","innerHTML","rest","cached","dangerouslySetInnerHTML","__html","text","toString","e","run","each","eachKey","list","map","mergedContext","itemProp","kebabToCamelCase","scope","getScope","key","getEvaluate","content","exports","default"],"sources":["@wordpress/interactivity/src/directives.js"],"sourcesContent":["/* @jsx createElement */\n\n/**\n * External dependencies\n */\nimport { h as createElement } from 'preact';\nimport { useContext, useMemo, useRef } from 'preact/hooks';\nimport { deepSignal, peek } from 'deepsignal';\n\n/**\n * Internal dependencies\n */\nimport { useWatch, useInit } from './utils';\nimport { directive, getScope, getEvaluate } from './hooks';\nimport { kebabToCamelCase } from './utils/kebab-to-camelcase';\n\nconst isObject = ( item ) =>\n\titem && typeof item === 'object' && ! Array.isArray( item );\n\nconst mergeDeepSignals = ( target, source, overwrite ) => {\n\tfor ( const k in source ) {\n\t\tif ( isObject( peek( target, k ) ) && isObject( peek( source, k ) ) ) {\n\t\t\tmergeDeepSignals(\n\t\t\t\ttarget[ `$${ k }` ].peek(),\n\t\t\t\tsource[ `$${ k }` ].peek(),\n\t\t\t\toverwrite\n\t\t\t);\n\t\t} else if ( overwrite || typeof peek( target, k ) === 'undefined' ) {\n\t\t\ttarget[ `$${ k }` ] = source[ `$${ k }` ];\n\t\t}\n\t}\n};\n\nconst newRule =\n\t/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g;\nconst ruleClean = /\\/\\*[^]*?\\*\\/|  +/g;\nconst ruleNewline = /\\n+/g;\nconst empty = ' ';\n\n/**\n * Convert a css style string into a object.\n *\n * Made by Cristian Bote (@cristianbote) for Goober.\n * https://unpkg.com/browse/goober@2.1.13/src/core/astish.js\n *\n * @param {string} val CSS string.\n * @return {Object} CSS object.\n */\nconst cssStringToObject = ( val ) => {\n\tconst tree = [ {} ];\n\tlet block, left;\n\n\twhile ( ( block = newRule.exec( val.replace( ruleClean, '' ) ) ) ) {\n\t\tif ( block[ 4 ] ) {\n\t\t\ttree.shift();\n\t\t} else if ( block[ 3 ] ) {\n\t\t\tleft = block[ 3 ].replace( ruleNewline, empty ).trim();\n\t\t\ttree.unshift( ( tree[ 0 ][ left ] = tree[ 0 ][ left ] || {} ) );\n\t\t} else {\n\t\t\ttree[ 0 ][ block[ 1 ] ] = block[ 2 ]\n\t\t\t\t.replace( ruleNewline, empty )\n\t\t\t\t.trim();\n\t\t}\n\t}\n\n\treturn tree[ 0 ];\n};\n\n/**\n * Creates a directive that adds an event listener to the global window or\n * document object.\n *\n * @param {string} type 'window' or 'document'\n * @return {void}\n */\nconst getGlobalEventDirective =\n\t( type ) =>\n\t( { directives, evaluate } ) => {\n\t\tdirectives[ `on-${ type }` ]\n\t\t\t.filter( ( { suffix } ) => suffix !== 'default' )\n\t\t\t.forEach( ( entry ) => {\n\t\t\t\tuseInit( () => {\n\t\t\t\t\tconst cb = ( event ) => evaluate( entry, event );\n\t\t\t\t\tconst globalVar = type === 'window' ? window : document;\n\t\t\t\t\tglobalVar.addEventListener( entry.suffix, cb );\n\t\t\t\t\treturn () =>\n\t\t\t\t\t\tglobalVar.removeEventListener( entry.suffix, cb );\n\t\t\t\t}, [] );\n\t\t\t} );\n\t};\n\nexport default () => {\n\t// data-wp-context\n\tdirective(\n\t\t'context',\n\t\t( {\n\t\t\tdirectives: { context },\n\t\t\tprops: { children },\n\t\t\tcontext: inheritedContext,\n\t\t} ) => {\n\t\t\tconst { Provider } = inheritedContext;\n\t\t\tconst inheritedValue = useContext( inheritedContext );\n\t\t\tconst currentValue = useRef( deepSignal( {} ) );\n\t\t\tconst defaultEntry = context.find(\n\t\t\t\t( { suffix } ) => suffix === 'default'\n\t\t\t);\n\n\t\t\tcurrentValue.current = useMemo( () => {\n\t\t\t\tif ( ! defaultEntry ) return null;\n\t\t\t\tconst { namespace, value } = defaultEntry;\n\t\t\t\tconst newValue = deepSignal( { [ namespace ]: value } );\n\t\t\t\tmergeDeepSignals( newValue, inheritedValue );\n\t\t\t\tmergeDeepSignals( currentValue.current, newValue, true );\n\t\t\t\treturn currentValue.current;\n\t\t\t}, [ inheritedValue, defaultEntry ] );\n\n\t\t\tif ( currentValue.current ) {\n\t\t\t\treturn (\n\t\t\t\t\t<Provider value={ currentValue.current }>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</Provider>\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t{ priority: 5 }\n\t);\n\n\t// data-wp-watch--[name]\n\tdirective( 'watch', ( { directives: { watch }, evaluate } ) => {\n\t\twatch.forEach( ( entry ) => {\n\t\t\tuseWatch( () => evaluate( entry ) );\n\t\t} );\n\t} );\n\n\t// data-wp-init--[name]\n\tdirective( 'init', ( { directives: { init }, evaluate } ) => {\n\t\tinit.forEach( ( entry ) => {\n\t\t\t// TODO: Replace with useEffect to prevent unneeded scopes.\n\t\t\tuseInit( () => evaluate( entry ) );\n\t\t} );\n\t} );\n\n\t// data-wp-on--[event]\n\tdirective( 'on', ( { directives: { on }, element, evaluate } ) => {\n\t\ton.filter( ( { suffix } ) => suffix !== 'default' ).forEach(\n\t\t\t( entry ) => {\n\t\t\t\telement.props[ `on${ entry.suffix }` ] = ( event ) => {\n\t\t\t\t\tevaluate( entry, event );\n\t\t\t\t};\n\t\t\t}\n\t\t);\n\t} );\n\n\t// data-wp-on-window--[event]\n\tdirective( 'on-window', getGlobalEventDirective( 'window' ) );\n\t// data-wp-on-document--[event]\n\tdirective( 'on-document', getGlobalEventDirective( 'document' ) );\n\n\t// data-wp-class--[classname]\n\tdirective(\n\t\t'class',\n\t\t( { directives: { class: classNames }, element, evaluate } ) => {\n\t\t\tclassNames\n\t\t\t\t.filter( ( { suffix } ) => suffix !== 'default' )\n\t\t\t\t.forEach( ( entry ) => {\n\t\t\t\t\tconst className = entry.suffix;\n\t\t\t\t\tconst result = evaluate( entry );\n\t\t\t\t\tconst currentClass = element.props.class || '';\n\t\t\t\t\tconst classFinder = new RegExp(\n\t\t\t\t\t\t`(^|\\\\s)${ className }(\\\\s|$)`,\n\t\t\t\t\t\t'g'\n\t\t\t\t\t);\n\t\t\t\t\tif ( ! result )\n\t\t\t\t\t\telement.props.class = currentClass\n\t\t\t\t\t\t\t.replace( classFinder, ' ' )\n\t\t\t\t\t\t\t.trim();\n\t\t\t\t\telse if ( ! classFinder.test( currentClass ) )\n\t\t\t\t\t\telement.props.class = currentClass\n\t\t\t\t\t\t\t? `${ currentClass } ${ className }`\n\t\t\t\t\t\t\t: className;\n\n\t\t\t\t\tuseInit( () => {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * This seems necessary because Preact doesn't change the class\n\t\t\t\t\t\t * names on the hydration, so we have to do it manually. It doesn't\n\t\t\t\t\t\t * need deps because it only needs to do it the first time.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tif ( ! result ) {\n\t\t\t\t\t\t\telement.ref.current.classList.remove( className );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement.ref.current.classList.add( className );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t}\n\t);\n\n\t// data-wp-style--[style-prop]\n\tdirective( 'style', ( { directives: { style }, element, evaluate } ) => {\n\t\tstyle\n\t\t\t.filter( ( { suffix } ) => suffix !== 'default' )\n\t\t\t.forEach( ( entry ) => {\n\t\t\t\tconst styleProp = entry.suffix;\n\t\t\t\tconst result = evaluate( entry );\n\t\t\t\telement.props.style = element.props.style || {};\n\t\t\t\tif ( typeof element.props.style === 'string' )\n\t\t\t\t\telement.props.style = cssStringToObject(\n\t\t\t\t\t\telement.props.style\n\t\t\t\t\t);\n\t\t\t\tif ( ! result ) delete element.props.style[ styleProp ];\n\t\t\t\telse element.props.style[ styleProp ] = result;\n\n\t\t\t\tuseInit( () => {\n\t\t\t\t\t/*\n\t\t\t\t\t * This seems necessary because Preact doesn't change the styles on\n\t\t\t\t\t * the hydration, so we have to do it manually. It doesn't need deps\n\t\t\t\t\t * because it only needs to do it the first time.\n\t\t\t\t\t */\n\t\t\t\t\tif ( ! result ) {\n\t\t\t\t\t\telement.ref.current.style.removeProperty( styleProp );\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.ref.current.style[ styleProp ] = result;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t} );\n\n\t// data-wp-bind--[attribute]\n\tdirective( 'bind', ( { directives: { bind }, element, evaluate } ) => {\n\t\tbind.filter( ( { suffix } ) => suffix !== 'default' ).forEach(\n\t\t\t( entry ) => {\n\t\t\t\tconst attribute = entry.suffix;\n\t\t\t\tconst result = evaluate( entry );\n\t\t\t\telement.props[ attribute ] = result;\n\n\t\t\t\t/*\n\t\t\t\t * This is necessary because Preact doesn't change the attributes on the\n\t\t\t\t * hydration, so we have to do it manually. It only needs to do it the\n\t\t\t\t * first time. After that, Preact will handle the changes.\n\t\t\t\t */\n\t\t\t\tuseInit( () => {\n\t\t\t\t\tconst el = element.ref.current;\n\n\t\t\t\t\t/*\n\t\t\t\t\t * We set the value directly to the corresponding HTMLElement instance\n\t\t\t\t\t * property excluding the following special cases. We follow Preact's\n\t\t\t\t\t * logic: https://github.com/preactjs/preact/blob/ea49f7a0f9d1ff2c98c0bdd66aa0cbc583055246/src/diff/props.js#L110-L129\n\t\t\t\t\t */\n\t\t\t\t\tif ( attribute === 'style' ) {\n\t\t\t\t\t\tif ( typeof result === 'string' )\n\t\t\t\t\t\t\tel.style.cssText = result;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\tattribute !== 'width' &&\n\t\t\t\t\t\tattribute !== 'height' &&\n\t\t\t\t\t\tattribute !== 'href' &&\n\t\t\t\t\t\tattribute !== 'list' &&\n\t\t\t\t\t\tattribute !== 'form' &&\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * The value for `tabindex` follows the parsing rules for an\n\t\t\t\t\t\t * integer. If that fails, or if the attribute isn't present, then\n\t\t\t\t\t\t * the browsers should \"follow platform conventions to determine if\n\t\t\t\t\t\t * the element should be considered as a focusable area\",\n\t\t\t\t\t\t * practically meaning that most elements get a default of `-1` (not\n\t\t\t\t\t\t * focusable), but several also get a default of `0` (focusable in\n\t\t\t\t\t\t * order after all elements with a positive `tabindex` value).\n\t\t\t\t\t\t *\n\t\t\t\t\t\t * @see https://html.spec.whatwg.org/#tabindex-value\n\t\t\t\t\t\t */\n\t\t\t\t\t\tattribute !== 'tabIndex' &&\n\t\t\t\t\t\tattribute !== 'download' &&\n\t\t\t\t\t\tattribute !== 'rowSpan' &&\n\t\t\t\t\t\tattribute !== 'colSpan' &&\n\t\t\t\t\t\tattribute !== 'role' &&\n\t\t\t\t\t\tattribute in el\n\t\t\t\t\t) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tel[ attribute ] =\n\t\t\t\t\t\t\t\tresult === null || result === undefined\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: result;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} catch ( err ) {}\n\t\t\t\t\t}\n\t\t\t\t\t/*\n\t\t\t\t\t * aria- and data- attributes have no boolean representation.\n\t\t\t\t\t * A `false` value is different from the attribute not being\n\t\t\t\t\t * present, so we can't remove it.\n\t\t\t\t\t * We follow Preact's logic: https://github.com/preactjs/preact/blob/ea49f7a0f9d1ff2c98c0bdd66aa0cbc583055246/src/diff/props.js#L131C24-L136\n\t\t\t\t\t */\n\t\t\t\t\tif (\n\t\t\t\t\t\tresult !== null &&\n\t\t\t\t\t\tresult !== undefined &&\n\t\t\t\t\t\t( result !== false || attribute[ 4 ] === '-' )\n\t\t\t\t\t) {\n\t\t\t\t\t\tel.setAttribute( attribute, result );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.removeAttribute( attribute );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t);\n\t} );\n\n\t// data-wp-ignore\n\tdirective(\n\t\t'ignore',\n\t\t( {\n\t\t\telement: {\n\t\t\t\ttype: Type,\n\t\t\t\tprops: { innerHTML, ...rest },\n\t\t\t},\n\t\t} ) => {\n\t\t\t// Preserve the initial inner HTML.\n\t\t\tconst cached = useMemo( () => innerHTML, [] );\n\t\t\treturn (\n\t\t\t\t<Type\n\t\t\t\t\tdangerouslySetInnerHTML={ { __html: cached } }\n\t\t\t\t\t{ ...rest }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t);\n\n\t// data-wp-text\n\tdirective( 'text', ( { directives: { text }, element, evaluate } ) => {\n\t\tconst entry = text.find( ( { suffix } ) => suffix === 'default' );\n\t\ttry {\n\t\t\tconst result = evaluate( entry );\n\t\t\telement.props.children =\n\t\t\t\ttypeof result === 'object' ? null : result.toString();\n\t\t} catch ( e ) {\n\t\t\telement.props.children = null;\n\t\t}\n\t} );\n\n\t// data-wp-run\n\tdirective( 'run', ( { directives: { run }, evaluate } ) => {\n\t\trun.forEach( ( entry ) => evaluate( entry ) );\n\t} );\n\n\t// data-wp-each--[item]\n\tdirective(\n\t\t'each',\n\t\t( {\n\t\t\tdirectives: { each, 'each-key': eachKey },\n\t\t\tcontext: inheritedContext,\n\t\t\telement,\n\t\t\tevaluate,\n\t\t} ) => {\n\t\t\tif ( element.type !== 'template' ) return;\n\n\t\t\tconst { Provider } = inheritedContext;\n\t\t\tconst inheritedValue = useContext( inheritedContext );\n\n\t\t\tconst [ entry ] = each;\n\t\t\tconst { namespace, suffix } = entry;\n\n\t\t\tconst list = evaluate( entry );\n\t\t\treturn list.map( ( item ) => {\n\t\t\t\tconst mergedContext = deepSignal( {} );\n\n\t\t\t\tconst itemProp =\n\t\t\t\t\tsuffix === 'default' ? 'item' : kebabToCamelCase( suffix );\n\t\t\t\tconst newValue = deepSignal( {\n\t\t\t\t\t[ namespace ]: { [ itemProp ]: item },\n\t\t\t\t} );\n\t\t\t\tmergeDeepSignals( newValue, inheritedValue );\n\t\t\t\tmergeDeepSignals( mergedContext, newValue, true );\n\n\t\t\t\tconst scope = { ...getScope(), context: mergedContext };\n\t\t\t\tconst key = eachKey\n\t\t\t\t\t? getEvaluate( { scope } )( eachKey[ 0 ] )\n\t\t\t\t\t: item;\n\n\t\t\t\treturn (\n\t\t\t\t\t<Provider value={ mergedContext } key={ key }>\n\t\t\t\t\t\t{ element.props.content }\n\t\t\t\t\t</Provider>\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\t\t{ priority: 20 }\n\t);\n\n\tdirective( 'each-child', () => null );\n};\n"],"mappings":"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"}